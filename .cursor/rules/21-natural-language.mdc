cat > .cursor/rules/21-natural-language.mdc <<'MD'
---
description: Natural-language runs: user speaks normally, agent follows the standard loop automatically
alwaysApply: true
---

Interpret natural-language requests as an analysis run. The user does NOT need to mention: workbooks, data_cache, evidence, CLI commands.

Source of truth:
- Process: .cursor/rules/20-agent-loop.mdc (PLAN -> RUN -> REPORT)
- Safety + mode selection: .cursor/rules/22-mode-switch.mdc
- What can be executed: capabilities_registry.yaml (only implemented items)

Defaults:
- Cache-first: do NOT force refresh unless the user explicitly asks for fresh data.
- Use only registry-referenced CLI commands in OPERATOR (do not guess "other" commands).

If the request asks for something that cannot be computed with existing evidence/capabilities:
- Ask exactly ONE short question to approve a PROXY metric (if appropriate), OR
- Output "CAPABILITY MISSING: <name>" and STOP.
Never present a PROXY as the requested metric.

Outputs:
- Always update reports/<client>/evidence.txt with resolved dates + canonical workbooks + related raw/norm/log paths.
MD
